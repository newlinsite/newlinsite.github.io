<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<style>
    body,
    html {
        height: 100%;
        width: 100%;
        background-color: #1f1f1f;
    }

    #board {
        height: 500px;
        width: 500px;
        background-color: #4d4d4d;
        display: flex;
        flex-wrap: wrap;

    }

    .cell {
        height: 33%;
        width: 33%;
        background-color: #9292b4;
    }
</style>


<body>

    <div id="board">
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
    </div>



</body>

</html>
<script>
    // 獲取遊戲板和單元格元素
    const board = document.getElementById('board');
    const cells = document.querySelectorAll('.cell');

    // 定義玩家和符號
    const X = 'X';
    const O = 'O';
    let currentPlayer = X;

    // 定義遊戲狀態
    let playBoard = ['', '', '', '', '', '', '', '', ''];
    let isGameOver = false;

    // 定義獲勝的組合
    const winCombos = [
        [0, 1, 2],
        [3, 4, 5],
        [6, 7, 8],
        [0, 3, 6],
        [1, 4, 7],
        [2, 5, 8],
        [0, 4, 8],
        [2, 4, 6]
    ];

    // 為每個單元格添加點擊事件監聽器
    cells.forEach(cell => {
        cell.addEventListener('click', handleClick, { once: true });
    });

    // 處理單元格的點擊事件
    function handleClick(e) {
        // 獲取點擊的單元格和索引
        const cell = e.target;
        const index = cell.dataset.index;

        // 如果單元格是空的，並且遊戲沒有結束，則填充符號
        if (playBoard[index] === '' && !isGameOver) {
            // 更新遊戲狀態
            playBoard[index] = currentPlayer;
            cell.innerHTML = currentPlayer;

            // 檢查是否有獲勝者或平局
            checkGameStatus();
        }
    }

    // 檢查遊戲狀態
    function checkGameStatus() {
        // 遍歷所有獲勝的組合，看是否有符合的
        for (let combo of winCombos) {
            let [a, b, c] = combo;

            // 如果有符合的，則宣佈獲勝者，並結束遊戲
            if (playBoard[a] !== '' && playBoard[a] === playBoard[b] && playBoard[a] === playBoard[c]) {
                board.classList.add('win');
                isGameOver = true;
                announceWinner(currentPlayer);
                return;
            }
        }

        // 如果沒有符合的，且沒有空的單元格，則宣佈平局，並結束遊戲
        if (!playBoard.includes('')) {
            board.classList.add('draw');
            isGameOver = true;
            announceDraw();
            return;
        }

        // 如果沒有結束，則切換玩家
        switchPlayer();
    }

    // 切換玩家
    function switchPlayer() {
        // 如果當前玩家是X，則切換為O，反之亦然
        currentPlayer = currentPlayer === X ? O : X;

        // 更新遊戲板的類別，以顯示當前玩家
        board.classList.remove(X);
        board.classList.remove(O);
        board.classList.add(currentPlayer);
    }

    // 宣佈獲勝者
    function announceWinner(winner) {
        // 創建一個提示元素，並添加到文檔中
        const message = document.createElement('div');
        message.classList.add('message');
        message.innerHTML = `${winner}獲勝了！`;
        document.body.appendChild(message);
    }

    // 宣佈平局
    function announceDraw() {
        // 創建一個提示元素，並添加到文檔中
        const message = document.createElement('div');
        message.classList.add('message');
        message.innerHTML = `平局！`;
        document.body.appendChild(message);
    }
</script>

</html>