<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/reset.css">
    <link rel="stylesheet" href="style/game.css">
    <title>快問快答</title>
</head>
<style>
    /******************************
           import
*******************************/

    /*import Noto sans TC*/
    @import url(https://fonts.googleapis.com/earlyaccess/notosanstc.css);


    /******************************
          Page
*******************************/
    * {
        position: relative;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
    }

    body {
        width: 100%;
        height: 100%;
        font-family: "Noto sans TC", "Microsoft JhengHei ", "微軟正黑體", sans-serif;
        background-color: #222222;
        overflow: hidden
    }

    a {
        text-decoration: none;
    }

    ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    div .block {
        display: inline-block;
    }



    /******************************
          style
*******************************/
    .container {
        width: 100%;
        height: 100vh;
    }

    .time,
    #question {
        position: absolute;
        top: 50%;
        left: 50%;
        font-size: 60px;
        border-radius: 4px;
        color: #21BCF9;
        transform: translate(-50%, -50%);
        text-align: center;
        z-index: 100;
    }

    .time {
        top: 60%;
        color: #b9b9b9;
        font-size: 40px;
    }

    #mask {
        height: 100%;
        width: 100%;
        background-color: #222222;

    }

    #mask>div {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
    }

    #mask>div p {
        color: #21BCF9;
        font-size: 100px;
        font-weight: 500;
        letter-spacing: 0.2em;
        margin: 36px 0;
    }

    /* #mask>div button{
   color: rgb(0, 0, 0);
   font-size: 36px;
   background-color: #21BCF9;
   padding:8px 48px;
   border-radius: 16px;
   box-shadow: 0 0 20px rgba(0, 0, 0, 0.089);
   border:0;
} */

    .show {
        opacity: 1;
        transition: 0.3s;
        z-index: 1000;
    }

    .hidden {
        opacity: 0;
        transition: 0.3s;
        z-index: 0;
    }

    #mask>div input {
        opacity: 0;
        position: absolute;
        left: 43%;
        bottom: 15%;
        z-index: 1100;
    }

    .input_btn {
        color: #fff;
        border: 1px solid #fff;
        border-radius: 4px;
        padding: 4px 16px;

    }

    span,
    #hotkey {
        display: block;
        color: #727272;
        font-size: 18px;
        margin-top: 16px;

    }

    #hotkey {
        position: fixed;
        left: 50%;
        bottom: 20px;
        z-index: 1500;
        transform: translateX(-50%);
    }
</style>

<body>
    <div class="container">
        <div id="mask" class="show">
            <div>
                <p>快問快答</p>
                <input type="file" id="fileInput">
                <div class="input_btn block">Upload file</div>
                <span>Please upload .txt and a line is a question</span>

            </div>
        </div>
        <div id="question"></div>
        <div id="hotkey"></div>
        <!-- <h1 class="time" id="count-down-timer">100</h1> -->
    </div>

</body>

<script>

    // Start & Home

    document.getElementById("hotkey").innerHTML = "Press N to Start";
    var home_mask = document.getElementById("mask");
    // start_btn.addEventListener("click", to_start, false);

    function to_start() {
        home_mask.setAttribute("class", "hidden");
        document.getElementById("hotkey").innerHTML = "Press N , ↓ , Space to Next question , Press H to back Home";
    };
    function to_home() {
        home_mask.setAttribute("class", "show");
        document.getElementById("hotkey").innerHTML = "Press N , ↓ , Space to Start";
    }

    // -------------------------
    // Random question 
    // -------------------------

    var Qlist = [];
    var Qlist_len = 0;

    // 預設問題
    Qlist = ["如果看到金城武熟睡在自己面前，你會做什麼?",
        "你最近都聽什麼哥?",
        "當你不知道要穿什麼顏色的衣服時，你會選什麼顏色?",
        "去年你最後悔的一件事是什麼?",
        "哪天你變身蜘蛛人，第一件事會做什麼?",
        "你昨天吃什麼當晚餐?",
        "你曾遇過最感動的事情是什麼?",
        "如果你有一張單程機票，你會去哪?",
        "你覺得人生勝利組是要具備什麼條件?",
        "如果你有任意門，你想去哪?",
        "如果你有隱型斗篷，你會怎麼做?",
        "如果你想重來，你會回到哪個時期?",
        "你相信一見鍾情嗎?",
        "你相信男女間有純友誼嗎?",
        "要對10年後的自己說一句話，你會說什麼?",
        "你最討厭的動物是什麼?",
        "你在Uber上發現沒帶錢包也沒帶手機，怎麼辦?",
        "如果你中10萬塊樂透，你要幹嘛?",
        "最近買過最貴的物品是什麼?",
        "上一次去台北101，是跟誰去?",
        "若發生地震你要逃跑只能拿一樣東西，你會拿什麼?",
        "你認為在哪跨年最浪漫?",
        "要選另一半，眼睛是要深遂的好．還是小眼睛好?",
        "愛情跟麵包，你會選哪一個?",
        "你醒來發現旁邊睡了一個陌生人，你會怎麼辦?",
        "如果你會功夫，你想要什麼功夫?",
        "提到劉德華，你會馬上想到什麼?",
        "最經典的西洋電影，你會推薦哪一部?",
        "你最喜歡和哪一個星座的人當朋友?",
        "當老闆對你說你明天可以不要來了，你會怎麼反應?",
        "最近一次去的遊樂園是哪一個?",
        "如果要跟一個人說對不起，你想對誰說?",
        "四個季節你最喜歡哪一個?",
        "提到NBA，你會想到哪個球星?",
        "要選台灣離島深度旅行，你會選哪裡?",
        "露營帳篷和露營車，你會選哪個住?",
        "夜釣小管和夜遊看梅花鹿，你會選哪個?",
        "當你另一半必須要有的一個特點?",
        "最喜歡的便利商店飲料?",
        "上廁所上到一半，老闆打來你會怎麼辦?",
        "最喜歡的夜市小吃?",
        "最近聽到的笑話?",
        "最喜歡的一句話(至理名言)?",
        "如果有下輩子，想當男生還是女生?",
        "回憶國小時期，現在還有印象的事是什麼?",
        "宏正上班第一天，最有印象的事?",
        "最喜歡的卡通人物?",
        "做過最有勇氣的事?",
        "扶老太太過馬路和淨灘，哪一件事你覺得比較有意義?",
        "聽到哪一句話，你會馬上翻臉?",
        "當你不爽的時候，會怎麼樣?",
        "看農民曆你會先看什麼資訊?",
        "你喜歡過聖誕節還是中秋節?",
        "你喜歡戴墨鏡還是戴帽子?",
        "彩虹七個顏色，你會喜歡哪一色?",
        "海水浴場和動物園，你比較喜歡哪一個?",
        "如果可以改變，你想多高(身高)?",
        "你退休後會想在哪個城市居住?",
        "珍珠和椰果，你比較喜歡飲料加哪種料?",
        "最推薦的飲料店?",
        "解封後，你最想做的事是什麼?",
        "林志玲和侯佩岑，你覺得誰比較是你的菜?",
        "給你抱怨公司一件事，你會講什麼?",
        "當你和老闆獨處在電梯，從1樓搭到14樓的期間，你會講什麼話?",
        "近期發生你最後悔的事?",
    ];

    // 建立隨機題號
    Qlist_len = Qlist.length;
    function getRandom() {
        return Math.floor(Math.random() * Qlist_len);
    }
    var num = getRandom();



    // 隨機取得題目,並印入 id:question
    function QintoHTML() {
        num = getRandom();
        document.getElementById("question").innerHTML = Qlist[num];
    }
    QintoHTML()



    // 問題輸入
    document.getElementById('fileInput').addEventListener('change', function selectedFileChanged() {
        if (this.files.length === 0) {
            console.log('請選擇檔案！');
            return;
        }
        const reader = new FileReader();
        reader.onload = function fileReadCompleted() {
            // 檔案問題分割 → 重新計算題目數 → 輸出題目
            Qlist = reader.result.split("\r");
            Qlist_len = Qlist.length;
            QintoHTML()
        };
        reader.readAsText(this.files[0]);
    });



    // 鍵盤快捷鍵
    window.addEventListener("keydown", torandom, false);
    function torandom(e) {
        var keyID = e.code;
        if (keyID === 'KeyN') {
            QintoHTML();
            to_start();
            paddedFormat(num)
        };
        if (keyID === 'Space') {
            QintoHTML();
            to_start();
            paddedFormat(num)
        };
        if (keyID === 'ArrowDown') {
            QintoHTML();
            to_start();
            paddedFormat(num)
        };
        if (keyID === 'KeyH') {
            to_home()
        }
        if (keyID === 'KeyS') {
            to_start()
        }
    }

    // 倒數計時
    function paddedFormat(num) {
        return num < 10 ? "0" + num : num;
    }

    function startCountDown(duration, element) {

        let secondsRemaining = duration;
        let min = 0;
        let sec = 0;

        let countInterval = setInterval(function () {

            min = parseInt(secondsRemaining / 60);
            sec = parseInt(secondsRemaining % 60);

            element.textContent = `${paddedFormat(min)}:${paddedFormat(sec)}`;

            secondsRemaining = secondsRemaining - 1;
            if (secondsRemaining < 0) { clearInterval(countInterval) };

        }, 1000);
    }

    window.onload = function () {
        let time_minutes = 1; // Value in minutes
        let time_seconds = 30; // Value in seconds

        let duration = time_minutes * 60 + time_seconds;

        element = document.querySelector('#count-down-timer');
        element.textContent = `${paddedFormat(time_minutes)}:${paddedFormat(time_seconds)}`;

        startCountDown(--duration, element);
    };


</script>

</html>